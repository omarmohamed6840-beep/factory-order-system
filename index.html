<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>MT FACTORY</title>

<style>
body{margin:0;font-family:Tahoma;background:#f4f6f9}
header{background:#0b3c88;color:#fff;padding:20px;text-align:center;font-size:24px}
.container{max-width:1100px;margin:auto;padding:20px}
.card{background:#fff;padding:20px;border-radius:12px;margin-bottom:20px;box-shadow:0 6px 14px rgba(0,0,0,.08)}
input{width:100%;padding:10px;margin:6px 0;border:1px solid #ddd;border-radius:8px}
button{padding:10px 15px;border:none;border-radius:8px;cursor:pointer}
.btn{background:#0b3c88;color:#fff}
.btn-red{background:#c0392b;color:#fff}
.hidden{display:none}
table{width:100%;border-collapse:collapse}
th,td{padding:10px;border-bottom:1px solid #eee;text-align:center}
th{background:#eef3ff}
.total{background:#0b3c88;color:#fff;padding:20px;border-radius:12px}
.loginBox{max-width:400px;margin:120px auto}
</style>
</head>

<body>

<header>MT FACTORY</header>

<div class="card loginBox" id="loginBox">
  <h3>تسجيل الدخول</h3>
  <input type="password" id="password" placeholder="كلمة المرور">
  <button class="btn" onclick="login()">دخول</button>
</div>

<div class="container hidden" id="app">

<div class="card">
<h3>إضافة أوردر</h3>
<input id="customer" placeholder="اسم العميل">
<input id="phone" placeholder="رقم الموبايل">
<input id="product" placeholder="المنتج">
<input id="totalPrice" type="number" placeholder="إجمالي السعر">
<button class="btn" onclick="addOrder()">حفظ الأوردر</button>
</div>

<div class="card">
<input id="search" placeholder="بحث برقم الموبايل" oninput="renderOrders()">
<table>
<thead>
<tr>
<th>العميل</th>
<th>الموبايل</th>
<th>الإجمالي</th>
<th>حذف</th>
</tr>
</thead>
<tbody id="ordersTable"></tbody>
</table>
</div>

<div class="total">
إجمالي المبيعات: <span id="sum">0</span>
</div>

</div>

<script>
const PASSWORD="factory123";
let orders=JSON.parse(localStorage.getItem("orders")||"[]");

function login(){
 if(password.value===PASSWORD){
  loginBox.classList.add("hidden");
  app.classList.remove("hidden");
  renderOrders();
 } else alert("كلمة المرور خطأ");
}

function addOrder(){
 orders.push({
  customer:customer.value,
  phone:phone.value,
  total:+totalPrice.value
 });
 localStorage.setItem("orders",JSON.stringify(orders));
 customer.value=phone.value=product.value=totalPrice.value="";
 renderOrders();
}

function renderOrders(){
 const body=document.getElementById("ordersTable");
 body.innerHTML="";
 let s=0;
 const q=search.value||"";
 orders.filter(o=>o.phone.includes(q)).forEach((o,i)=>{
  s+=o.total;
  const tr=document.createElement("tr");

  tr.innerHTML=
   "<td>"+o.customer+"</td>"+
   "<td>"+o.phone+"</td>"+
   "<td>"+o.total+"</td>"+
   "<td><button class='btn-red' onclick='del("+i+")'>X</button></td>";

  body.appendChild(tr);
 });
 sum.innerText=s;
}

function del(i){
 orders.splice(i,1);
 localStorage.setItem("orders",JSON.stringify(orders));
 renderOrders();
}
</script>

</body>
</html>
