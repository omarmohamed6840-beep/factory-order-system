<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>MT FACTORY - Order System</title>
<style>
body{font-family:Arial;background:#f4f6f9;margin:0}
header{background:#0b3c88;color:#fff;padding:15px;text-align:center}
.box{background:#fff;margin:20px;padding:20px;border-radius:8px}
input,select,button{padding:8px;margin:5px;width:100%}
button{background:#0b3c88;color:#fff;border:none;cursor:pointer}
.order{border-bottom:1px solid #ddd;padding:10px}
.hidden{display:none}
</style>
</head>

<body>

<header>
<h2>MT FACTORY</h2>
</header>

<div class="box" id="loginBox">
<h3>تسجيل الدخول</h3>
<input type="password" id="password" placeholder="كلمة المرور">
<button onclick="login()">دخول</button>
</div>

<div class="box hidden" id="app">

<h3>إضافة أوردر</h3>

<input id="customer" placeholder="اسم العميل">
<input id="phone" placeholder="رقم الموبايل">
<input id="address" placeholder="العنوان">
<input id="product" placeholder="اسم المنتج">
<input id="cost" type="number" placeholder="التكلفة">
<input id="price" type="number" placeholder="السعر">

<select id="status">
<option>Design</option>
<option>Laser</option>
<option>Shipping</option>
<option>Shipped</option>
</select>

<button onclick="addOrder()">حفظ الأوردر</button>

<hr>

<h3>بحث برقم الأوردر</h3>
<input id="search" placeholder="ORD-0001" oninput="renderOrders()">

<hr>

<h3>الأوردرات</h3>
<div id="orders"></div>

<hr>
<h3>الإجماليات</h3>
<p>إجمالي الأرباح: <span id="profit">0</span></p>
<p>Cash Out: <span id="cash">0</span></p>

</div>

<script>
const PASSWORD="factory123";
const ordersDiv=document.getElementById("orders");

let orders=JSON.parse(localStorage.getItem("orders")||"[]");

function login(){
  if(password.value===PASSWORD){
    loginBox.classList.add("hidden");
    app.classList.remove("hidden");
    renderOrders();
  } else alert("كلمة المرور خطأ");
}

function generateId(){
  return "ORD-"+String(orders.length+1).padStart(4,"0");
}

function addOrder(){
  if(!customer.value||!phone.value) return alert("أكمل البيانات");

  const order={
    id:generateId(),
    customer:customer.value,
    phone:phone.value,
    address:address.value,
    product:product.value,
    cost:Number(cost.value),
    price:Number(price.value),
    profit:Number(price.value)-Number(cost.value),
    status:status.value,
    date:new Date().toLocaleDateString()
  };

  orders.push(order);
  localStorage.setItem("orders",JSON.stringify(orders));
  clearForm();
  renderOrders();
}

function clearForm(){
  customer.value="";
  phone.value="";
  address.value="";
  product.value="";
  cost.value="";
  price.value="";
}

function renderOrders(){
  ordersDiv.innerHTML="";
  let totalProfit=0;
  let totalCash=0;

  const q=search.value.toLowerCase();

  orders.filter(o=>o.id.toLowerCase().includes(q)).forEach(o=>{
    totalProfit+=o.profit;
    totalCash+=o.price;

    ordersDiv.innerHTML+=`
    <div class="order">
      <b>${o.id}</b> - ${o.customer}<br>
      ${o.product} | ${o.status}<br>
      السعر: ${o.price} | التكلفة: ${o.cost} | الربح: ${o.profit}
    </div>`;
  });

  profit.innerText=totalProfit;
  cash.innerText=totalCash;
}
</script>

</body>
</html>
