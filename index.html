<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>MT FACTORY - Order System</title>
<style>
body{
    font-family: Arial;
    background:#f4f7fb;
    margin:0;
}
header{
    background:#0b3c88;
    color:#fff;
    padding:15px;
    text-align:center;
    font-size:22px;
}
.container{
    width:95%;
    margin:20px auto;
}
.box{
    background:#fff;
    padding:15px;
    border-radius:8px;
    margin-bottom:20px;
}
input,button{
    padding:8px;
    margin:5px 0;
    width:100%;
}
button{
    background:#0b3c88;
    color:#fff;
    border:none;
    cursor:pointer;
}
.order{
    border-bottom:1px solid #ddd;
    padding:10px 0;
}
.actions button{
    width:auto;
    margin-left:5px;
}
.total{
    font-size:18px;
    color:#0b3c88;
    font-weight:bold;
}
.hidden{display:none;}
</style>
</head>

<body>

<header>MT FACTORY</header>

<div class="container">

<!-- LOGIN -->
<div class="box" id="loginBox">
<h3>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h3>
<input type="password" id="password" placeholder="Ø§Ù„Ø¨Ø§Ø³ÙˆØ±Ø¯">
<button onclick="login()">Ø¯Ø®ÙˆÙ„</button>
</div>

<!-- APP -->
<div class="box hidden" id="app">

<h3>Ø¥Ø¶Ø§ÙØ© Ø£ÙˆØ±Ø¯Ø±</h3>
<input id="name" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„">
<input id="phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„">
<input id="address" placeholder="Ø§Ù„Ø¹Ù†ÙˆØ§Ù†">
<input id="product" placeholder="Ø§Ù„Ù…Ù†ØªØ¬">
<input id="price" type="number" placeholder="Ø§Ù„Ù…Ø¨Ù„Øº">
<button onclick="addOrder()">Ø­ÙØ¸ Ø§Ù„Ø£ÙˆØ±Ø¯Ø±</button>

<hr>

<h3>Ø¨Ø­Ø« Ø¨Ø±Ù‚Ù… Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„</h3>
<input id="search" placeholder="Ø§ÙƒØªØ¨ Ø±Ù‚Ù… Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„" onkeyup="render()">

<hr>

<h3>Ø§Ù„Ø£ÙˆØ±Ø¯Ø±Ø§Øª</h3>
<div id="orders"></div>

<hr>

<h3>Cash Out (Ù…ØµØ±ÙˆÙØ§Øª)</h3>
<input id="cashNote" placeholder="Ø§ØªØµØ±ÙØª ÙÙŠ Ø§ÙŠÙ‡">
<input id="cashAmount" type="number" placeholder="Ø§Ù„Ù…Ø¨Ù„Øº">
<button onclick="addCash()">Ø¥Ø¶Ø§ÙØ© Ù…ØµØ±ÙˆÙ</button>

<hr>

<div class="total">
Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø­Ø³Ø§Ø¨: <span id="net">0</span> Ø¬Ù†ÙŠÙ‡
</div>

</div>

</div>

<script>
const PASSWORD="1234";
let orders=JSON.parse(localStorage.getItem("orders")||"[]");
let cash=JSON.parse(localStorage.getItem("cash")||"[]");

function login(){
    if(password.value===PASSWORD){
        loginBox.classList.add("hidden");
        app.classList.remove("hidden");
        render();
    }else alert("Ø¨Ø§Ø³ÙˆØ±Ø¯ ØºÙ„Ø·");
}

function addOrder(){
    orders.push({
        id:"ORD-"+(orders.length+1).toString().padStart(4,"0"),
        name:name.value,
        phone:phone.value,
        address:address.value,
        product:product.value,
        price:Number(price.value)
    });
    save();
    clearInputs();
}

function addCash(){
    cash.push({
        note:cashNote.value,
        amount:Number(cashAmount.value)
    });
    save();
}

function deleteOrder(i){
    if(confirm("Ù…Ø³Ø­ Ø§Ù„Ø£ÙˆØ±Ø¯Ø±ØŸ")){
        orders.splice(i,1);
        save();
    }
}

function save(){
    localStorage.setItem("orders",JSON.stringify(orders));
    localStorage.setItem("cash",JSON.stringify(cash));
    render();
}

function render(){
    ordersDiv.innerHTML="";
    let total=0;
    let paidOut=0;
    let s=search.value;

    orders.forEach((o,i)=>{
        if(s && !o.phone.includes(s)) return;
        total+=o.price;
        ordersDiv.innerHTML+=`
        <div class="order">
        <b>${o.id}</b> - ${o.name} - ${o.phone}<br>
        ${o.product} | ${o.price} Ø¬Ù†ÙŠÙ‡
        <div class="actions">
        <button onclick="deleteOrder(${i})">ğŸ—‘ï¸</button>
        </div>
        </div>`;
    });

    cash.forEach(c=>paidOut+=c.amount);
    net.innerText=total-paidOut;
}

function clearInputs(){
    document.querySelectorAll("input").forEach(i=>i.value="");
}
</script>

</body>
</html>
